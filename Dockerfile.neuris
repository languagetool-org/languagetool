FROM alpine:3.20
RUN apk add --no-cache openjdk21-jre gcompat libstdc++

RUN adduser -u 10000 -h /home/languagetool -D languagetool
USER languagetool

WORKDIR /home/languageTool

COPY libs/ libs
COPY META-INF/ META-INF
COPY org/ org
COPY languagetool-server.jar .
COPY server.properties .

EXPOSE 8181/tcp

ENTRYPOINT [ "java", "-Xmx2048m", "-cp", "languagetool-server.jar", "org.languagetool.server.HTTPServer", "--config", "server.properties", "--port", "8181", "--allow-origin", "--public" ]
